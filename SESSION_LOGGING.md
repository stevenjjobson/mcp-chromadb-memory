# Claude Code Session Logging

This feature allows you to automatically log your Claude Code conversations to your Obsidian vault, creating a searchable history of your development sessions.

## Features

- **Automatic Session Tracking**: Captures user messages, assistant responses, tool usage, and code changes
- **Smart Summarization**: Extracts key topics, decisions, and achievements from conversations
- **Code Highlights**: Preserves significant code snippets with syntax highlighting
- **File Tracking**: Records all files created and modified during the session
- **Obsidian Integration**: Creates well-formatted notes with proper frontmatter and tags

## Usage

### Starting a Session

Use the `start_session_logging` tool to begin logging:

```json
{
  "name": "start_session_logging",
  "arguments": {
    "project": "My Project Name"
  }
}
```

### During the Session

The logger automatically tracks:
- All conversation messages
- Tools used (Read, Write, Edit, Bash, etc.)
- Files created or modified
- Code changes
- Key decisions and achievements

### Saving the Session

When ready to save, use the `save_session_log` tool:

```json
{
  "name": "save_session_log",
  "arguments": {
    "summary": "Optional manual summary of what was accomplished"
  }
}
```

### Manual Event Logging

You can manually log specific events:

```json
{
  "name": "log_session_event",
  "arguments": {
    "type": "decision",
    "content": "Decided to use TypeScript for better type safety"
  }
}
```

Event types:
- `user`: User messages
- `assistant`: Assistant responses
- `tool`: Tool usage
- `decision`: Key decisions made
- `achievement`: Completed tasks or milestones

## Session Note Format

Sessions are saved to: `Claude Code Sessions/YYYY/MM/YYYY-MM-DD-Project-Name.md`

Each note includes:
- **Metadata**: Date, time, project, tags, tools used
- **Summary**: Main topics, achievements, and decisions
- **Tools Used**: List of all MCP tools utilized
- **Files Changed**: Created and modified files
- **Code Highlights**: Significant code snippets
- **Conversation Highlights**: Key exchanges from the session

## Example Session Note

```markdown
---
date: 2025-01-05
time: 14:30
project: MCP ChromaDB Memory
tags: [claude-code, session-logging, obsidian-integration, typescript]
tools: [Read, Write, Edit, Bash, TodoWrite]
---

# Claude Code Session - MCP ChromaDB Memory

## Session Overview
- **Date**: 2025-01-05 14:30
- **Duration**: 1h 45m
- **Project**: [[MCP ChromaDB Memory]]

## Summary

### Topics Covered
- Session logging implementation
- Obsidian integration
- TypeScript development

### Achievements
- Successfully implemented session logging module
- Created Obsidian note generation with auto-summarization
- Added three new MCP tools for session management

### Key Decisions
- Decided to use TypeScript classes for session management
- Chose to auto-generate summaries from conversation content

## Tools Used
- `Read`
- `Write`
- `Edit`
- `Bash`
- `TodoWrite`

## Files Changed

### Created
- `/src/session-logger.ts`
- `/SESSION_LOGGING.md`

### Modified
- `/src/index.ts`

## Code Highlights

### Created SessionLogger class
```typescript
export class SessionLogger {
  private obsidianManager: ObsidianManager;
  private sessionEntries: SessionEntry[] = [];
  private sessionSummary: SessionSummary;
  // ...
}
```

## Conversation Highlights

**User**: I was hoping we could log Claude Code sessions to Obsidian...

**Assistant**: I'll implement a session logging feature that tracks conversations...

---
*Generated by MCP ChromaDB Memory Server*
```

## Configuration

The session logger uses these environment variables:
- `OBSIDIAN_VAULT_PATH`: Path to your Obsidian vault (required)

Default settings:
- Session folder: `Claude Code Sessions`
- Auto-save: Enabled
- Maximum code snippet length: 500 characters
- Maximum snippets per session: 3

## Benefits

1. **Knowledge Retention**: Never lose track of what you worked on
2. **Learning History**: Review past decisions and solutions
3. **Project Documentation**: Automatic documentation of development progress
4. **Searchable Archive**: Use Obsidian's search to find past solutions
5. **Code Snippet Library**: Build a personal library of code examples

## Best Practices

1. Start logging at the beginning of each significant work session
2. Use descriptive project names for better organization
3. Add manual summaries for complex sessions
4. Review session logs periodically to reinforce learning
5. Use Obsidian's linking features to connect related sessions